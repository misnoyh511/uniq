<div class="dashboard-container">

  <div class="dashboard-inner-container">
    <div class="dashboard-getting-stared-wrapper">
      <app-sub-nav [navType]="'feedback'"></app-sub-nav>
      <div class="page-title-filter-wrap">
        <div class="row">
          <div class="col-md-6">
            <div class="page-title-wrapper">
              <h1>Feedback</h1>
            </div>
          </div>
          <div class="col-md-6">
            <div class="row">
              <div class="col-sm-4">
                <!--<span class="data-update-text">Updated an hour ago</span>-->
              </div>
              <div class="col-sm-8">
                <div class="date-picker-filter-wrap">
                  <div class="daterange daterange--double date-range-picker" (onDateChange) ="onDateChange($event)" appDatePicker></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="getting-started-wrap-wrapper">
        <div class="step-inner-wrapper">
          <div class="step-inner-title">
            <h3>Feedback</h3>
          </div>
          <div class="feedback-wrapper">
            <form>
              <div class="row">
                <div class="col-sm-6">
                  <div class="analytics-feedback-filters">
                    <select [(ngModel)]="selectedValue" name="selectedValue" (change)="getSession()">
                      <option value="all">All</option>
                      <option value="positive">Positive</option>
                      <option value="negative">Negative</option>
                    </select>
                  </div>
                </div>
                <div class="col-sm-6">
                  <div class="analytics-feedback-filters feedback">
                    {{feedback_type ? 'message': 'session'}}
                  </div>
                </div>
              </div>
            </form>
            <div class="analytics-inner-wrap">
              <chart [options]="options"></chart>
            </div>

            <table class="table table-bordered table-striped feedback_table" *ngIf="sessions && sessions.length">
              <thead>
              <tr>
                <th>Message</th>
                <th>Message Count</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let session of items"[class]="session.status + 'Color'">
                <td matTooltip={{session.msg}}>{{session.msg.length > 90 ? session.msg.substring(0, 90)+ '...' : session.msg}}</td>
                <td>{{session.count}}</td>
              </tr>
              </tbody>
            </table>

            <div class="pagination-export-wrapper" *ngIf="sessions && sessions.length && items && items.length">
              <div class="row">
                <div class="col-md-4">
                  <div class="export-btn-wrap pagination-export-wrap">
                    <button class="blue-btn">Export CSV</button>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="pagination-wrap hide-prev pagination-export-wrap">
                    <ul>
                      <li (click)="moveToFirstPage()" [class.disabled]="pageNo === 0"><a href="javascript:void(0)"><i class="fa fa-fast-backward"></i></a></li>
                      <li (click)="goBack()" [class.disabled]="pageNo === 0"><a href="javascript:void(0)"><i class="fa fa-caret-left"></i></a></li>
                      <li>{{(pageNo + 1) + ' / ' + totalPages}}</li>
                      <li (click)="goAhead()" [class.disabled]="pageNo === (totalPages-1)"><a href="javascript:void(0)"><i class="fa fa-caret-right"></i></a></li>
                    </ul>
                  </div>
                </div>
                <div class="col-md-4" *ngIf="itemsPerPage.length">
                  <div class="number-of-items-wrap pagination-export-wrap">
                    <form>
                      <label>Number of Items</label>
                      <select [(ngModel)]="itemPerPage" name="itemPerPage" (change)="getItemCount()">
                        <option *ngFor="let page of itemsPerPage">{{page}}</option>
                      </select>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
